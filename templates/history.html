{% extends 'base.html' %}

{% block title %}Patient History - Doctor App{% endblock %}

{% block content %}

<header class="page-header"> 

<h1>⚫ Patient Consultation History</h1> </header>

<div class="card">
<div class="filter-container">
<input type="text" placeholder="Search by patient name..." class="filter-search">
<div class="filter-dates">
<label for="startDate">From:</label>
<input type="date" id="startDate" name="startDate">
<label for="endDate">To:</label>
<input type="date" id="endDate" name="endDate">
</div>
<button class="btn">Search</button>
</div>

<table class="history-table">
<thead>
<tr>
<th>Record</th>
<th>Patient Name</th>
<th>Date</th>
<th>PDF</th>
<th>Action</th>
</tr>
</thead>
<tbody>
{% for item in prescriptions %}
<tr>
<td style="text-align: center; font-size: 1.5em;">⚫</td>
<td>{{ item.patient.name }}</td>
<td>{{ item.date_created|date:"d M Y, P" }}</td>
<td>
{% if item.prescription_file %}
<a href="{{ item.prescription_file.url }}" target="_blank" class="btn btn-secondary btn-small">View PDF</a>
{% else %}
No File
{% endif %}
</td>
<td>
<a href="{% url 'prescription_detail' item.id %}" class="btn btn-small">View Details</a>
</td>
</tr>
{% empty %}
<tr>
<td colspan="5" style="text-align: center; padding: 20px;">No history found. Create a new prescription to see it here.</td>
</tr>
{% endfor %}
</tbody>
</table>
</div>
{% endblock %}