{% extends 'base.html' %}

{% block title %}Patient History - Doctor App{% endblock %}

{% block content %}
<header class="page-header">
  <h1>ðŸ“œ Patient Consultation History</h1>
</header>

<div class="card">
  <div class="filter-container">
    <input type="text" placeholder="Search by patient name..." class="filter-search">
    <div class="filter-dates">
      <label for="startDate">From:</label>
      <input type="date" id="startDate" name="startDate">
      <label for="endDate">To:</label>
      <input type="date" id="endDate" name="endDate">
    </div>
    <button class="btn">Search</button>
  </div>

  <table class="history-table">
    <thead>
      <tr>
        <th>ID</th>
        <th>Patient Name</th>
        <th>Date</th>
        <th>PDF</th>
        <th>Action</th>
      </tr>
    </thead>
    <tbody>
      {% for prescription in prescriptions %}
      <tr>
        <td>#{{ prescription.id }}</td>
        <td>{{ prescription.patient.name }}</td>
        <td>{{ prescription.date_created|date:"d M Y, P" }}</td>
        <td>
          {% if prescription.prescription_file %}
            <a href="{{ prescription.prescription_file.url }}" target="_blank">View PDF</a>
          {% else %}
            No File
          {% endif %}
        </td>
        <td><a href="#" class="btn btn-small">View Details</a></td>
      </tr>
      {% empty %}
      <!-- This message shows if there are no prescriptions in the database -->
      <tr>
        <td colspan="5" style="text-align: center; padding: 20px;">No history found.</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>

  <!-- Pagination can be added here later if needed -->
</div>
{% endblock %}

